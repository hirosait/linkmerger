from fiona import collection
from shapely.geometry import mapping, shape

# Path
linkShapeFile = "C:\qgis\ICP\qgis\projects\minato-ku\minato-link.shp"
nodeShapeFile = "C:\qgis\ICP\qgis\projects\minato-ku\minato-node.shp"

fromNodeId = {}
toNodeId = {}
# linkをlistに入れる
with collection(linkShapeFile, "r") as fl:
    for feature in fl:
        fromNode = feature['properties']['fromnodeid']
        fromNodeId[fromNode] = feature['properties']
        toNode = feature['properties']['tonodeid']
        toNodeId[toNode] = feature['properties']

with collection(nodeShapeFile, "r") as fn:
    for feature in fn:
        connlink = feature['properties']['connlink']
        if connlink == 2:
            nodeId = feature['properties']['objectid']
            if nodeId in fromNodeId:
                fromLink = fromNodeId[nodeId]
            if nodeId in toNodeId:
                toLink = toNodeId[nodeId]
            print(fromLink, toLink) # merge these two
